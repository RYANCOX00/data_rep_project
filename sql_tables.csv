CREATE TABLE IF NOT EXISTS acquirer_details (acq_id INT not null auto_increment primary key, name CHAR(30))            
CREATE TABLE IF NOT EXISTS merchant_details (MID INT not null auto_increment primary key, name CHAR (30), acq_id INT not null, rate_margin float(6,2), acquirer_rate float(6,2), comp_rate float(6,2), FOREIGN KEY (acq_id) REFERENCES acquirer_details(acq_id), CONSTRAINT CHECK (acquirer_rate <= rate_margin), CONSTRAINT CHECK (comp_rate + acquirer_rate = rate_margin))
CREATE TABLE IF NOT EXISTS currency_rates (rate_id INT not null auto_increment primary key, base_name  CHAR(3), foreign_name  CHAR(3), foreign_rate float(12,6) ) 
CREATE TABLE IF NOT EXISTS transactions (trans_id INT not null auto_increment primary key, mid int NOT NULL, rate_id INT NOT NULL, foreign_rate  float(12,6), foreign_amount float (12,2) NOT NULL, base_amount float (12,2), transaction_date DATE  NOT NULL, processed_date DATE NOT NULL, FOREIGN KEY (mid) REFERENCES merchant_details(mid), FOREIGN KEY (rate_id) REFERENCES currency_rates(rate_id))  
CREATE TABLE IF NOT EXISTS commission_split (CID INT not null auto_increment primary key, acq_id INT not null, total_commission_amount float(12,2), acquirer_commission float(12,2), company_commision float(12,2), FOREIGN KEY (CID) REFERENCES transactions(trans_id))
